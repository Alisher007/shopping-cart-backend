(this.webpackJsonpshopredux=this.webpackJsonpshopredux||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),l=(a(93),a(39)),i=a(14),s=a(33),u=a(19),m=a(17),p=JSON.parse(localStorage.getItem("carts")),d={carts:p||[],products:[],isAuthenticated:!1,token:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("token",JSON.stringify(t.token)),Object(m.a)({},e,{isAuthenticated:!0,token:t.token});case"LOGIN-CHECK":return Object(m.a)({},e,{isAuthenticated:!0,token:t.token});case"LOGOUT":return localStorage.removeItem("token"),Object(m.a)({},e,{isAuthenticated:!1});case"ADD_CART":if(e.carts!==[]){var a=e.carts.findIndex((function(e){return e.pk===t.cart.pk}));if(-1!==a){var n=Object.assign([],e.carts),r=n.find((function(e){return e.pk===t.cart.pk}));return r.quantityCart++,n.splice(a,1,r),Object(m.a)({},e,{carts:n})}}var c=Object.assign({},t.cart,{quantityCart:1}),o=Object.assign([],e.carts);return o.push(c),Object(m.a)({},e,{carts:o});case"REDUCE_CART":var l=e.carts.find((function(e){return e.pk===t.cart.pk}));if(void 0!==l&&l.quantityCart>1){var i=e.carts.find((function(e){return e.pk===t.cart.pk})),s=Object(m.a)({},i);s.quantityCart--;var p=Object(u.a)(e.carts),E=p.findIndex((function(e){return e.pk===t.cart.pk}));return p.splice(E,1,s),Object(m.a)({},e,{carts:p})}var h=e.carts.filter((function(e){return e.pk!==t.cart.pk}));return console.log(h," reduceCart"),console.log(e.carts," state.carts"),Object(m.a)({},e,{carts:h});case"GET_PRODUCTS":return Object(m.a)({},e,{products:t.products});case"REMOVE_CART":var f=e.carts.filter((function(e){return e.pk!==t.cart.pk}));return Object(m.a)({},e,{carts:f});case"SAVE_CART":return localStorage.setItem("carts",JSON.stringify(e.carts)),e;default:return e}},h=a(25),f=a(29),g=a.n(f),b=a(70),v=a(162),O=a(163),k=a(164),y=a(165),j=a(168),C=a(167),w=a(71),N=a.n(w),S=a(166),x=a(44),T=a.n(x),A=Object(b.a)({card:{maxWidth:345},media:{height:140}});function _(e){var t=e.product,a=e.add,n=A();return r.a.createElement(v.a,{className:n.card},r.a.createElement(O.a,null,r.a.createElement(k.a,{className:n.media,image:t.img,title:t.name})),r.a.createElement(y.a,null,r.a.createElement(S.a,{container:!0,spacing:1,justify:"space-between"},r.a.createElement(S.a,{item:!0,xs:3},r.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"$",t.price)),r.a.createElement(S.a,{item:!0,xs:9},r.a.createElement(j.a,{size:"small",onClick:a},r.a.createElement(N.a,{style:{color:T.a[500]}}))))))}var R=a(169),I=a(170);var D=function(){var e=Object(i.c)((function(e){return e.products})),t=Object(i.c)((function(e){return e.carts})),a=Object(i.b)();return Object(n.useEffect)((function(){t.length>-1&&a({type:"SAVE_CART"})}),[t]),Object(n.useEffect)((function(){g.a.post("https://shoppingcart-django-redux.herokuapp.com/products/api/token/",{username:"admin",password:"admin"}).then((function(e){a({type:"LOGIN",token:e.data.access})})).catch((function(e){console.log(" err in fetching ",e)})),g.a.get("https://shoppingcart-django-redux.herokuapp.com/products/").then((function(e){a({type:"GET_PRODUCTS",products:e.data})})).catch((function(e){console.log(" err in fetching ",e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Products"),r.a.createElement(R.a,{maxWidth:"md",style:{marginTop:"10px"}},0!==e.length?r.a.createElement(S.a,{container:!0,spacing:1},e.map((function(e){return r.a.createElement(S.a,{item:!0,xs:3,key:e.pk,align:"right"},r.a.createElement(I.a,{badgeContent:(t=e,"-"+Math.floor(t.discount)+"%"),color:"primary"}),r.a.createElement(_,{product:e,add:function(){return a({type:"ADD_CART",cart:e})}}));var t}))):r.a.createElement(S.a,{container:!0,spacing:1},r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement("h3",{className:"empty"},"You need to login to see the product list")))))},q=a(4),G=a(173),L=a(176),z=a(175),B=a(172),P=a(174),V=a(171),W=a(80),J=a(74),U=a.n(J),M=a(72),X=a.n(M),$=a(73),H=a.n($),K=Object(q.a)((function(e){return{root:{backgroundColor:e.palette.background.default}}}))(V.a),F=Object(b.a)({table:{minWidth:650},total:{borderColor:"white"}});function Q(){var e=Object(i.c)((function(e){return e.carts})),t=Object(i.b)(),a=F();return Object(n.useEffect)((function(){e.length>-1&&t({type:"SAVE_CART"})}),[e]),r.a.createElement("div",null,r.a.createElement("h1",null,"Shopping Cart"),r.a.createElement(S.a,{container:!0,spacing:1},r.a.createElement(S.a,{item:!0,xs:1}),r.a.createElement(S.a,{item:!0},0!==e.length?r.a.createElement(B.a,{component:W.a},r.a.createElement(G.a,{"aria-label":"simple table"},r.a.createElement(P.a,null,r.a.createElement(V.a,null,r.a.createElement(z.a,null,"Name"),r.a.createElement(z.a,{align:"right"},"Price"),r.a.createElement(z.a,{align:"right"},"Quantity"),r.a.createElement(z.a,{align:"center"},"Actions"))),r.a.createElement(L.a,null,e.map((function(e){return r.a.createElement(V.a,{key:e.pk},r.a.createElement(z.a,{component:"th",scope:"row"},e.name),r.a.createElement(z.a,{align:"right"},"$",e.price),r.a.createElement(z.a,{align:"right"},e.quantityCart),r.a.createElement(z.a,{align:"right"},r.a.createElement(j.a,{size:"small"},r.a.createElement(X.a,{fontSize:"small",style:{color:T.a[500]},onClick:function(){return t({type:"ADD_CART",cart:e})}})),r.a.createElement(j.a,{size:"small"},r.a.createElement(H.a,{fontSize:"small",color:"secondary",onClick:function(){return t({type:"REDUCE_CART",cart:e})}})),r.a.createElement(j.a,{size:"small"},r.a.createElement(U.a,{fontSize:"small",onClick:function(){return t({type:"REMOVE_CART",cart:e})}}))))})),r.a.createElement(K,{className:a.total},r.a.createElement(z.a,{component:"th",scope:"row"},"Total"),r.a.createElement(z.a,{align:"right"},"$",e.reduce((function(e,t){return+e+ +t.price}),0)*e.reduce((function(e,t){return+e+ +t.quantityCart}),0)),r.a.createElement(z.a,{align:"right"},e.reduce((function(e,t){return+e+ +t.quantityCart}),0)))))):r.a.createElement("h3",null,"No items in the Shopping Cart"))))}var Y=a(11),Z=a(47),ee=function(e,t){var a=Object(n.useState)({}),r=Object(Z.a)(a,2),c=r[0],o=r[1],l=Object(n.useState)({}),i=Object(Z.a)(l,2),s=i[0],u=i[1],p=Object(n.useState)(!1),d=Object(Z.a)(p,2),E=d[0],h=d[1];Object(n.useEffect)((function(){0===Object.keys(s).length&&E&&e()}),[s]);return{handleChange:function(e){e.persist(),o((function(t){return Object(m.a)({},t,Object(Y.a)({},e.target.name,e.target.value))})),u(t(c))},handleSubmit:function(e){e&&e.preventDefault(),u(t(c)),h(!0)},values:c,errors:s}};function te(e){var t={};return e.name?e.name.length<=2&&(t.name="Name must be 2 or more characters"):t.name="name is required",e.password?e.password.length<=2&&(t.password="Password must be 2 or more characters"):t.password="Password is required",t}var ae=a(183),ne=a(177),re=a(182),ce=a(75),oe=a.n(ce),le=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),ie=function(e){var t=Object(i.b)(),a=le(),n=ee((function(){g.a.post("https://shoppingcart-django-redux.herokuapp.com/products/api/token/",{username:c.name,password:c.password}).then((function(a){console.log(a.data.access),t({type:"LOGIN",token:a.data.access}),e.history.push("/"),window.location.reload(!0)})).catch((function(e){console.log(" err in fetching ",e)}))}),te),c=n.values,o=n.errors,l=n.handleChange,s=n.handleSubmit;return r.a.createElement("div",{className:"section is-fullheight"},r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(ne.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(ae.a,{className:a.avatar},r.a.createElement(oe.a,null)),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement(C.a,{component:"h1",variant:"h5"},"username: admin"),r.a.createElement(C.a,{component:"h1",variant:"h5"},"password: admin"),r.a.createElement("form",{className:a.form,onSubmit:s,noValidate:!0},r.a.createElement(S.a,{container:!0,spacing:2},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(re.a,{variant:"outlined",required:!0,fullWidth:!0,autoComplete:"name",name:"name",id:"name",label:"Name",autoFocus:!0,onChange:l,value:c.name||"",helperText:o.name,error:"string"===typeof o.name}),r.a.createElement(C.a,{component:"h1",variant:"h5"})),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(re.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"component-error",autoComplete:"current-password",onChange:l,value:c.password||"",helperText:o.password,error:"string"===typeof o.password}))),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Log in")))))},se=a(178),ue=a(179),me=a(77),pe=a.n(me),de=a(184),Ee=Object(b.a)((function(e){return{root:{flexGrow:3},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},navButtonStyle:{color:"white","text-decoration":"none"}}}));var he=function(){var e=Object(i.c)((function(e){return e.carts})),t=Ee();return r.a.createElement("div",null,r.a.createElement(se.a,null,r.a.createElement(ue.a,null,r.a.createElement(j.a,{color:"default"},r.a.createElement(s.b,{activeClassName:"active",exact:!0,to:"/",className:t.navButtonStyle},r.a.createElement(C.a,{color:"inherit",variant:"subtitle1"},"Products  ",r.a.createElement(de.a,{fontSize:"small"}))))," ",r.a.createElement("br",null),r.a.createElement(j.a,{color:"default"},r.a.createElement(s.b,{activeClassName:"active",exact:!0,to:"/cartlist",className:t.navButtonStyle},r.a.createElement(C.a,{color:"inherit",variant:"subtitle1"},r.a.createElement(I.a,{badgeContent:e.length,color:"secondary",showZero:!0},"Cart",r.a.createElement(pe.a,null)))))," ",r.a.createElement("br",null),r.a.createElement(j.a,{color:"default"},r.a.createElement("a",{href:"https://alisher-khalikulov.herokuapp.com",className:t.navButtonStyle},r.a.createElement(C.a,{color:"inherit",variant:"subtitle1"},"Portfolio"))))))};var fe=function(){return r.a.createElement("h1",null,"Notfound")};var ge=function(){var e=Object(i.b)(),t=localStorage.getItem("token");return Object(n.useEffect)((function(){null!==t&&e({type:"LOGIN-CHECK",token:JSON.parse(t)})}),[JSON.parse(t)]),r.a.createElement("div",null,r.a.createElement(he,null),r.a.createElement("div",{style:{marginTop:80}},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:D}),r.a.createElement(h.a,{exact:!0,path:"/cartlist",component:Q}),r.a.createElement(h.a,{exact:!0,path:"/login",component:ie}),r.a.createElement(h.a,{component:fe}))))},be=(a(117),a(180)),ve=a(78),Oe=a(181),ke=Object(l.b)(E,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var ye=function(){var e=Object(be.a)("(prefers-color-scheme: dark)"),t=r.a.useMemo((function(){return Object(ve.a)({typography:{useNextVariants:!0},palette:{type:"dark"}})}),[e]);return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{store:ke},r.a.createElement(Oe.a,{theme:t},r.a.createElement(s.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(ge,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=localStorage.getItem("token");je&&(g.a.defaults.headers.common={Authorization:"Bearer "+JSON.parse(je),"Content-Type":"application/json"}),o.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,a){e.exports=a(118)},93:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.b1b271c5.chunk.js.map